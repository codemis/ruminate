<ion-view view-title="Ruminate">

  <ion-nav-buttons side="secondary">
    <button class="button icon button-icon ion-plus" ng-click="selectPassage()"></button>
  </ion-nav-buttons>


  <ion-content ng-init="updateData(objId)">
    <div ng-hide="hasReflection" class="ng-hide">
      <div class="logo-watermark"></div>
      <div class="call-to-action">
        <button class="button button-positive button-block" ng-click="selectPassage()">Select a Passage</button>
      </div>
    </div>
    <ion-list class="list" ng-show="hasReflection" class="ng-hide">
      <ion-item href="#/tab/home/passage/{{passage.recordId}}" class="item-text-wrap passage-snippet item-icon-right">
        <span class="passage-snippet-text">{{truncatedSnippet}}</span>
        <i class="icon ion-chevron-right icon-accessory"></i>
      </ion-item>
      <ion-item class="item-text-wrap current-question" ng-if="hasUnansweredQuestion()">
        {{unansweredQuestion.question}}
        <textarea class="answer-input" placeholder="Answer" ng-model="$parent.$parent.$parent.answerModel" ng-change="updateAnswer()"></textarea> <!-- angular-elastic? -->
      </ion-item>
      <div ng-repeat="question in questions">
        <ion-item class="question-question" ng-click="toggleQuestion(question)">
          {{question.question}}
          <button class="button icon button-icon ion-arrow-expand question-popover-button" ng-click="openQuestionModal($event, question)"></button>
        </ion-item>
        <ion-item class="question-answer item-text-wrap">
          <div class="padding-reference">
            <div class="position-reference">
              <span class="question-scale-viewer">{{question.answer}}</span>
            </div>
          </div>
          <div class="question-answer-hidden" ng-show="question.open">{{question.answer}}</div>
        </ion-item>
      </li>
    </ion-list>
  </ion-content>
</ion-view>
